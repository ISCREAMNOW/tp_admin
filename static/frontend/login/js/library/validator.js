define("library/validator",["./promise"],function(a,b,c){var d=a("./promise"),e={},f={email:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,mobile:/^1\d{10}$/,digital:/\d+/,lowercase:/[a-z]+/,uppercase:/[A-Z]+/,symbols:/[_!@#\$%\^&\*\(\)\\\|\/\?\.\<\>'"\{\}\[\]=\-\~\,\;\:\s]+/,password:/^[a-zA-Z0-9_!@#\$%\^&\*\(\)\\\|\/\?\.\<\>'"\{\}\[\]=\-\~\,\;\:\s]+$/,mobile_verify:/^\d{6}$/,mobile_verify_voice:/^\d{4}$/},g={check_username:function(a){return new d(function(b,c){0===a.length?c(new Error("请输入登录名，登录名可能是手机号、邮箱或用户名")):b()})},check_login_password:function(a){return new d(function(b,c){0===a.length?c(new Error("请输入密码，密码可能为字母、数字或符号的组合")):b()})},check_email:function(a){return new d(function(b,c){return 0===a.length?void c(new Error("Email为空")):(f.email.test(a)?b():c(new Error("Email格式不正确")),void b())})},check_mobile_on_blur:function(a){return new d(function(b,c){function d(d){0===d.status?c(new Error('该手机号已存在，如果您是该用户，请立刻 <a href="/i/account/login?signup&mobile='+a+'">登录</a>')):b(d.status)}0===a.length?b():/^170/.test(a)?c(new Error("抱歉，暂不支持虚拟运营商手机号码注册！")):!f.mobile.test(a)&&a.length>0?c(new Error("您输入的手机号码格式有误，需为 11 位数字格式")):e[a]?d(e[a]):$.post("/i/account/check_mobile",{mobile:a},function(b){e[a]=b,d(b)})})},check_mobile:function(a){return new d(function(b,c){function d(d){0===d.status?c(new Error('该手机号已存在，如果您是该用户，请立刻 <a href="/i/account/login?signup&mobile='+a+'">登录</a>')):b(d.status)}0===a.length?c(new Error("请输入 11 位手机号码")):f.mobile.test(a)?/^170/.test(a)?c(new Error("抱歉，暂不支持虚拟运营商手机号码注册！")):e[a]?d(e[a]):$.post("/i/account/check_mobile",{mobile:a},function(b){e[a]=b,d(b)}):c(new Error("您输入的手机号码格式有误，需为 11 位数字格式"))})},check_mobile_no_ajax:function(a){return new d(function(b,c){0===a.length?c(new Error("请输入 11 位手机号码")):f.mobile.test(a)?b():c(new Error("您输入的手机号码格式有误，需为 11 位数字格式"))})},check_mobile_verify:function(a,b){return b=b||{},new d(function(c,d){"sms"===b.verify_type?b.mobile_verify_sent?0===a.length?d(new Error("请输入 6 位短信校验码")):f.mobile_verify.test(a)?c():d(new Error("您输入的短信校验码格式有误，需为 6 位数字格式")):d(new Error("请点击获取短信校验码")):"voice"===b.verify_type?b.mobile_verify_sent?0===a.length?d(new Error("请输入电话语音播报的验证码")):f.mobile_verify_voice.test(a)?c():d(new Error("您输入的语音校验码格式有误，需为 4 位数字格式")):d(new Error("请点击获取语音校验码")):c()})},check_mobile_verify_on_blur:function(a,b){return b=b||{},new d(function(c,d){0===a.length?c():("sms"===b.verify_type&&(b.mobile_verify_sent?f.mobile_verify.test(a)?c():d(new Error("您输入的短信校验码格式有误，需为 6 位数字格式")):d(new Error("请点击获取短信验证码"))),"voice"===b.verify_type&&b.mobile_verify_sent&&(f.mobile_verify_voice.test(a)?c():d(new Error("您输入的语音校验码格式有误，需为 4 位数字格式"))))})},check_verify_code:function(a){return new d(function(b,c){0===a.length?c(new Error("请按右图输入验证码，不区分大小写")):4!==a.length&&c(new Error("验证码格式错误，请重新填写")),b()})},check_verify_code_on_blur:function(a){return new d(function(a,b){a()})},check_password2:function(a,b){return new d(function(c,d){0===a.length&&d(new Error("请再次输入密码")),b!==a&&d(new Error("两次密码输入不一致，请重新输入")),c()})},check_password2_on_blur:function(a,b){return new d(function(c,d){0===a.length?c():b!==a?d(new Error("两次密码输入不一致，请重新输入")):c()})},check_password:function(a){var b=0;return new d(function(c,d){if(a.length<6||a.length>16)d(new Error("为了您的账号安全，密码长度只能在 6-16 个字符之间"));else if(f.password.test(a))switch(f.digital.test(a)&&b++,f.lowercase.test(a)&&b++,f.uppercase.test(a)&&b++,f.symbols.test(a)&&b++,b){case 1:d(new Error("密码不能使用纯数字、纯字母、纯符号"));break;case 2:c("normal");break;case 3:case 4:c("strong")}else d(new Error("有不允许的字符"))})},check_password_on_blur:function(a){var b=0;return new d(function(c,d){if(0===a.length)c();else if(a.length<6||a.length>16)d(new Error("为了您的账号安全，密码长度只能在 6-16 个字符之间"));else if(f.password.test(a))switch(f.digital.test(a)&&b++,f.lowercase.test(a)&&b++,f.uppercase.test(a)&&b++,f.symbols.test(a)&&b++,b){case 1:d(new Error("密码不能使用纯数字、纯字母、纯符号"));break;case 2:c("normal");break;case 3:case 4:c("strong")}else d(new Error("有不允许的字符"))})},check_gt_verify:function(){return new d(function(a,b){window.GT_DATA?a():b(new Error("请拖动完成验证"))})},check_captcha_ticket:function(){return new d(function(a,b){document.getElementById("captcha_ticket").value.length?a():b(new Error("请完成上方验证"))})},check_aliyun_verify:function(){return new d(function(a,b){window.ALIYUN_DATA?a():b(new Error("请拖动完成验证"))})},check_dynamic_mobile:function(a){return new d(function(b,c){return 0===a.length?c(new Error("请输入 11 位手机号码")):f.mobile.test(a)?b():c(new Error("您输入的手机号码格式有误，需为 11 位数字格式"))})},check_dynamic_mobile_on_blur:function(a){return g.check_mobile_on_blur(a)},check_dynamic_verify_code:function(a){return new d(function(b,c){return 0===a.length?c(new Error("请先输入验证码")):b()})},check_dynamic_password:function(a){return new d(function(b,c){return 0===a.length?c(new Error("请输入6位手机动态密码")):/^\d{6}$/.test(a)?void b():c(new Error("您输入的动态密码格式有误，需为6位数字格式"))})},check_dynamic_gt_verify:function(){return new d(function(a,b){window.GT_DYNAMIC_DATA?a():b(new Error("请拖动完成验证"))})}};c.exports=g});