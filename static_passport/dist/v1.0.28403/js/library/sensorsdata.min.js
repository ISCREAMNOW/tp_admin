try{!function(sd){function app_js_bridge(){function a(a){d=a,_.isJSONString(d)&&(d=JSON.parse(d)),e&&e(d)}function b(){"object"==typeof window.SensorsData_APP_JS_Bridge&&window.SensorsData_APP_JS_Bridge.sensorsdata_call_app&&(d=SensorsData_APP_JS_Bridge.sensorsdata_call_app(),_.isJSONString(d)&&(d=JSON.parse(d)))}function c(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var a=document.createElement("iframe");a.setAttribute("src","sensorsanalytics://getAppInfo"),document.documentElement.appendChild(a),a.parentNode.removeChild(a),a=null}}var d=null,e=null;window.sensorsdata_app_js_bridge_call_js=function(b){a(b)},sd.getAppStatus=function(a){return c(),b(),a?void(null===d?e=a:a(d)):d}}function start_heatmap(){}if(sd=window[sd],"function"!=typeof sd&&"object"!=typeof sd||sd.has_load_sdk)return!1;sd._t=sd._t||1*new Date,sd.has_load_sdk=!0,"object"!=typeof JSON&&(JSON={}),function(){function f(a){return 10>a?"0"+a:a}function this_value(){return this.valueOf()}function quote(a){return rx_escapable.lastIndex=0,rx_escapable.test(a)?'"'+a.replace(rx_escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var _=sd._={};sd.para=sd.para||{},sd.para_default={max_referrer_string_length:200,max_string_length:500,cross_subdomain:!0,show_log:!0,debug_mode:!1,debug_mode_upload:!1,session_time:0,use_client_time:!1,source_channel:[],vtrack_ignore:{},auto_init:!0,is_single_page:!1};for(var i in sd.para_default)void 0===sd.para[i]&&(sd.para[i]=sd.para_default[i]);/sa\.gif[^\/]*$/.test(sd.para.server_url)||(sd.para.server_url=sd.para.server_url.replace(/\/sa$/,"/sa.gif").replace(/(\/sa)(\?[^\/]+)$/,"/sa.gif$2")),sd.para.debug_mode_url=sd.para.debug_mode_url||sd.para.server_url.replace("sa.gif","debug"),sd.para.noCache===!0?sd.para.noCache="?"+(new Date).getTime():sd.para.noCache="";var detector={};!function(){function a(a){return Object.prototype.toString.call(a)}function b(b){return"[object Object]"===a(b)}function c(b){return"[object Function]"===a(b)}function d(a,b){for(var c=0,d=a.length;d>c&&b.call(a,a[c],c)!==!1;c++);}function e(a){if(!o.test(a))return null;var b,c,d,e,f;if(-1!==a.indexOf("trident/")&&(b=/\btrident\/([0-9.]+)/.exec(a),b&&b.length>=2)){d=b[1];var g=b[1].split(".");g[0]=parseInt(g[0],10)+4,f=g.join(".")}b=o.exec(a),e=b[1];var h=b[1].split(".");return"undefined"==typeof f&&(f=e),h[0]=parseInt(h[0],10)-4,c=h.join("."),"undefined"==typeof d&&(d=c),{browserVersion:f,browserMode:e,engineVersion:d,engineMode:c,compatible:d!==c}}function f(a){if(k)try{var b=k.twGetRunPath.toLowerCase(),c=k.twGetSecurityID(j),d=k.twGetVersion(c);if(b&&-1===b.indexOf(a))return!1;if(d)return{version:d}}catch(e){}}function g(d,e,f){var g=c(e)?e.call(null,f):e;if(!g)return null;var h={name:d,version:i,codename:""},j=a(g);if(g===!0)return h;if("[object String]"===j){if(-1!==f.indexOf(g))return h}else{if(b(g))return g.hasOwnProperty("version")&&(h.version=g.version),h;if(g.exec){var k=g.exec(f);if(k)return k.length>=2&&k[1]?h.version=k[1].replace(/_/g,"."):h.version=i,h}}}function h(a,b,c,e){var f=w;d(b,function(b){var c=g(b[0],b[1],a);return c?(f=c,!1):void 0}),c.call(e,f.name,f.version)}var i="-1",j=window,k=j.external,l=j.navigator.userAgent||"",m=j.navigator.appVersion||"",n=j.navigator.vendor||"",o=/\b(?:msie |ie |trident\/[0-9].*rv[ :])([0-9.]+)/,p=/\bbb10\b.+?\bversion\/([\d.]+)/,q=/\bblackberry\b.+\bversion\/([\d.]+)/,r=/\bblackberry\d+\/([\d.]+)/,s=[["nokia",function(a){return-1!==a.indexOf("nokia ")?/\bnokia ([0-9]+)?/:/\bnokia([a-z0-9]+)?/}],["samsung",function(a){return-1!==a.indexOf("samsung")?/\bsamsung(?:[ \-](?:sgh|gt|sm))?-([a-z0-9]+)/:/\b(?:sgh|sch|gt|sm)-([a-z0-9]+)/}],["wp",function(a){return-1!==a.indexOf("windows phone ")||-1!==a.indexOf("xblwp")||-1!==a.indexOf("zunewp")||-1!==a.indexOf("windows ce")}],["pc","windows"],["ipad","ipad"],["ipod","ipod"],["iphone",/\biphone\b|\biph(\d)/],["mac","macintosh"],["mi",/\bmi[ \-]?([a-z0-9 ]+(?= build|\)))/],["hongmi",/\bhm[ \-]?([a-z0-9]+)/],["aliyun",/\baliyunos\b(?:[\-](\d+))?/],["meizu",function(a){return a.indexOf("meizu")>=0?/\bmeizu[\/ ]([a-z0-9]+)\b/:/\bm([0-9cx]{1,4})\b/}],["nexus",/\bnexus ([0-9s.]+)/],["huawei",function(a){var b=/\bmediapad (.+?)(?= build\/huaweimediapad\b)/;return-1!==a.indexOf("huawei-huawei")?/\bhuawei\-huawei\-([a-z0-9\-]+)/:b.test(a)?b:/\bhuawei[ _\-]?([a-z0-9]+)/}],["lenovo",function(a){return-1!==a.indexOf("lenovo-lenovo")?/\blenovo\-lenovo[ \-]([a-z0-9]+)/:/\blenovo[ \-]?([a-z0-9]+)/}],["zte",function(a){return/\bzte\-[tu]/.test(a)?/\bzte-[tu][ _\-]?([a-su-z0-9\+]+)/:/\bzte[ _\-]?([a-su-z0-9\+]+)/}],["vivo",/\bvivo(?: ([a-z0-9]+))?/],["htc",function(a){return/\bhtc[a-z0-9 _\-]+(?= build\b)/.test(a)?/\bhtc[ _\-]?([a-z0-9 ]+(?= build))/:/\bhtc[ _\-]?([a-z0-9 ]+)/}],["oppo",/\boppo[_]([a-z0-9]+)/],["konka",/\bkonka[_\-]([a-z0-9]+)/],["sonyericsson",/\bmt([a-z0-9]+)/],["coolpad",/\bcoolpad[_ ]?([a-z0-9]+)/],["lg",/\blg[\-]([a-z0-9]+)/],["android",/\bandroid\b|\badr\b/],["blackberry",function(a){return a.indexOf("blackberry")>=0?/\bblackberry\s?(\d+)/:"bb10"}]],t=[["wp",function(a){return-1!==a.indexOf("windows phone ")?/\bwindows phone (?:os )?([0-9.]+)/:-1!==a.indexOf("xblwp")?/\bxblwp([0-9.]+)/:-1!==a.indexOf("zunewp")?/\bzunewp([0-9.]+)/:"windows phone"}],["windows",/\bwindows nt ([0-9.]+)/],["macosx",/\bmac os x ([0-9._]+)/],["iOS",function(a){return/\bcpu(?: iphone)? os /.test(a)?/\bcpu(?: iphone)? os ([0-9._]+)/:-1!==a.indexOf("iph os ")?/\biph os ([0-9_]+)/:/\bios\b/}],["yunos",/\baliyunos ([0-9.]+)/],["Android",function(a){return a.indexOf("android")>=0?/\bandroid[ \/-]?([0-9.x]+)?/:a.indexOf("adr")>=0?a.indexOf("mqqbrowser")>=0?/\badr[ ]\(linux; u; ([0-9.]+)?/:/\badr(?:[ ]([0-9.]+))?/:"android"}],["chromeos",/\bcros i686 ([0-9.]+)/],["linux","linux"],["windowsce",/\bwindows ce(?: ([0-9.]+))?/],["symbian",/\bsymbian(?:os)?\/([0-9.]+)/],["blackberry",function(a){var b=a.match(p)||a.match(q)||a.match(r);return b?{version:b[1]}:"blackberry"}]],u=[["edgehtml",/edge\/([0-9.]+)/],["trident",o],["blink",function(){return"chrome"in j&&"CSS"in j&&/\bapplewebkit[\/]?([0-9.+]+)/}],["webkit",/\bapplewebkit[\/]?([0-9.+]+)/],["gecko",function(a){var b;return(b=a.match(/\brv:([\d\w.]+).*\bgecko\/(\d+)/))?{version:b[1]+"."+b[2]}:void 0}],["presto",/\bpresto\/([0-9.]+)/],["androidwebkit",/\bandroidwebkit\/([0-9.]+)/],["coolpadwebkit",/\bcoolpadwebkit\/([0-9.]+)/],["u2",/\bu2\/([0-9.]+)/],["u3",/\bu3\/([0-9.]+)/]],v=[["edge",/edge\/([0-9.]+)/],["sogou",function(a){return a.indexOf("sogoumobilebrowser")>=0?/sogoumobilebrowser\/([0-9.]+)/:a.indexOf("sogoumse")>=0?!0:/ se ([0-9.x]+)/}],["theworld",function(){var a=f("theworld");return"undefined"!=typeof a?a:"theworld"}],["360",function(a){var b=f("360se");return"undefined"!=typeof b?b:-1!==a.indexOf("360 aphone browser")?/\b360 aphone browser \(([^\)]+)\)/:/\b360(?:se|ee|chrome|browser)\b/}],["maxthon",function(){try{if(k&&(k.mxVersion||k.max_version))return{version:k.mxVersion||k.max_version}}catch(a){}return/\b(?:maxthon|mxbrowser)(?:[ \/]([0-9.]+))?/}],["micromessenger",/\bmicromessenger\/([\d.]+)/],["qq",/\bm?qqbrowser\/([0-9.]+)/],["green","greenbrowser"],["tt",/\btencenttraveler ([0-9.]+)/],["liebao",function(a){if(a.indexOf("liebaofast")>=0)return/\bliebaofast\/([0-9.]+)/;if(-1===a.indexOf("lbbrowser"))return!1;var b;try{k&&k.LiebaoGetVersion&&(b=k.LiebaoGetVersion())}catch(c){}return{version:b||i}}],["tao",/\btaobrowser\/([0-9.]+)/],["coolnovo",/\bcoolnovo\/([0-9.]+)/],["saayaa","saayaa"],["baidu",/\b(?:ba?idubrowser|baiduhd)[ \/]([0-9.x]+)/],["ie",o],["mi",/\bmiuibrowser\/([0-9.]+)/],["opera",function(a){var b=/\bopera.+version\/([0-9.ab]+)/,c=/\bopr\/([0-9.]+)/;return b.test(a)?b:c}],["oupeng",/\boupeng\/([0-9.]+)/],["yandex",/yabrowser\/([0-9.]+)/],["ali-ap",function(a){return a.indexOf("aliapp")>0?/\baliapp\(ap\/([0-9.]+)\)/:/\balipayclient\/([0-9.]+)\b/}],["ali-ap-pd",/\baliapp\(ap-pd\/([0-9.]+)\)/],["ali-am",/\baliapp\(am\/([0-9.]+)\)/],["ali-tb",/\baliapp\(tb\/([0-9.]+)\)/],["ali-tb-pd",/\baliapp\(tb-pd\/([0-9.]+)\)/],["ali-tm",/\baliapp\(tm\/([0-9.]+)\)/],["ali-tm-pd",/\baliapp\(tm-pd\/([0-9.]+)\)/],["uc",function(a){return a.indexOf("ucbrowser/")>=0?/\bucbrowser\/([0-9.]+)/:a.indexOf("ubrowser/")>=0?/\bubrowser\/([0-9.]+)/:/\buc\/[0-9]/.test(a)?/\buc\/([0-9.]+)/:a.indexOf("ucweb")>=0?/\bucweb([0-9.]+)?/:/\b(?:ucbrowser|uc)\b/}],["chrome",/ (?:chrome|crios|crmo)\/([0-9.]+)/],["android",function(a){return-1!==a.indexOf("android")?/\bversion\/([0-9.]+(?: beta)?)/:void 0}],["blackberry",function(a){var b=a.match(p)||a.match(q)||a.match(r);return b?{version:b[1]}:"blackberry"}],["safari",/\bversion\/([0-9.]+(?: beta)?)(?: mobile(?:\/[a-z0-9]+)?)? safari\//],["webview",/\bcpu(?: iphone)? os (?:[0-9._]+).+\bapplewebkit\b/],["firefox",/\bfirefox\/([0-9.ab]+)/],["nokia",/\bnokiabrowser\/([0-9.]+)/]],w={name:"na",version:i},x=function(a){a=(a||"").toLowerCase();var b={};h(a,s,function(a,c){var d=parseFloat(c);b.device={name:a,version:d,fullVersion:c},b.device[a]=d},b),h(a,t,function(a,c){var d=parseFloat(c);b.os={name:a,version:d,fullVersion:c},b.os[a]=d},b);var c=e(a);return h(a,u,function(a,d){var e=d;c&&(d=c.engineVersion||c.engineMode,e=c.engineMode);var f=parseFloat(d);b.engine={name:a,version:f,fullVersion:d,mode:parseFloat(e),fullMode:e,compatible:c?c.compatible:!1},b.engine[a]=f},b),h(a,v,function(a,d){var e=d;c&&("ie"===a&&(d=c.browserVersion),e=c.browserMode);var f=parseFloat(d);b.browser={name:a,version:f,fullVersion:d,mode:parseFloat(e),fullMode:e,compatible:c?c.compatible:!1},b.browser[a]=f},b),b};detector=x(l+" "+m+" "+n)}();var ArrayProto=Array.prototype,FuncProto=Function.prototype,ObjProto=Object.prototype,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,LIB_VERSION="1.6.54";sd.lib_version=LIB_VERSION;var error_msg=[],is_first_visitor=!1,just_test_distinctid=0,just_test_distinctid_2=0,just_test_distinctid_detail=0,just_test_distinctid_detail2=0,source_channel_standard="utm_source utm_medium utm_campaign utm_content utm_term",logger="object"==typeof logger?logger:{};logger.info=function(){if(!sd.para.show_log)return!1;if("object"==typeof console&&console.log)try{return console.log.apply(console,arguments)}catch(a){console.log(arguments[0])}},function(){var a=(FuncProto.bind,ArrayProto.forEach),b=ArrayProto.indexOf,c=Array.isArray,d={},e=_.each=function(b,c,e){if(null==b)return!1;if(a&&b.forEach===a)b.forEach(c,e);else if(b.length===+b.length){for(var f=0,g=b.length;g>f;f++)if(f in b&&c.call(e,b[f],f,b)===d)return!1}else for(var h in b)if(hasOwnProperty.call(b,h)&&c.call(e,b[h],h,b)===d)return!1};_.logger=logger,_.extend=function(a){return e(slice.call(arguments,1),function(b){for(var c in b)void 0!==b[c]&&(a[c]=b[c])}),a},_.extend2Lev=function(a){return e(slice.call(arguments,1),function(b){for(var c in b)void 0!==b[c]&&(_.isObject(b[c])&&_.isObject(a[c])?_.extend(a[c],b[c]):a[c]=b[c])}),a},_.coverExtend=function(a){return e(slice.call(arguments,1),function(b){for(var c in b)void 0!==b[c]&&void 0===a[c]&&(a[c]=b[c])}),a},_.isArray=c||function(a){return"[object Array]"===toString.call(a)},_.isFunction=function(a){try{return/^\s*\bfunction\b/.test(a)}catch(b){return!1}},_.isArguments=function(a){return!(!a||!hasOwnProperty.call(a,"callee"))},_.toArray=function(a){return a?a.toArray?a.toArray():_.isArray(a)?slice.call(a):_.isArguments(a)?slice.call(a):_.values(a):[]},_.values=function(a){var b=[];return null==a?b:(e(a,function(a){b[b.length]=a}),b)},_.include=function(a,c){var f=!1;return null==a?f:b&&a.indexOf===b?-1!=a.indexOf(c):(e(a,function(a){return f||(f=a===c)?d:void 0}),f)}}(),_.inherit=function(a,b){return a.prototype=new b,a.prototype.constructor=a,a.superclass=b.prototype,a},_.trim=function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},_.isObject=function(a){return"[object Object]"==toString.call(a)&&null!=a},_.isEmptyObject=function(a){if(_.isObject(a)){for(var b in a)if(hasOwnProperty.call(a,b))return!1;return!0}return!1},_.isUndefined=function(a){return void 0===a},_.isString=function(a){return"[object String]"==toString.call(a)},_.isDate=function(a){return"[object Date]"==toString.call(a)},_.isBoolean=function(a){return"[object Boolean]"==toString.call(a)},_.isNumber=function(a){return"[object Number]"==toString.call(a)&&/[\d\.]+/.test(String(a))},_.isJSONString=function(a){try{JSON.parse(a)}catch(b){return!1}return!0},_.decodeURIComponent=function(a){var b="";try{b=decodeURIComponent(a)}catch(c){b=a}return b},_.encodeDates=function(a){return _.each(a,function(b,c){_.isDate(b)?a[c]=_.formatDate(b):_.isObject(b)&&(a[c]=_.encodeDates(b))}),a},_.formatDate=function(a){function b(a){return 10>a?"0"+a:a}return a.getFullYear()+"-"+b(a.getMonth()+1)+"-"+b(a.getDate())+" "+b(a.getHours())+":"+b(a.getMinutes())+":"+b(a.getSeconds())+"."+b(a.getMilliseconds())},_.searchObjDate=function(a){_.isObject(a)&&_.each(a,function(b,c){_.isObject(b)?_.searchObjDate(a[c]):_.isDate(b)&&(a[c]=_.formatDate(b))})},_.formatString=function(a){return a.length>sd.para.max_string_length?(logger.info("字符串长度超过限制，已经做截取--"+a),a.slice(0,sd.para.max_string_length)):a},_.searchObjString=function(a){_.isObject(a)&&_.each(a,function(b,c){_.isObject(b)?_.searchObjString(a[c]):_.isString(b)&&(a[c]=_.formatString(b))})},_.unique=function(a){for(var b,c=[],d={},e=0;e<a.length;e++)b=a[e],b in d||(d[b]=!0,c.push(b));return c},_.strip_sa_properties=function(a){return _.isObject(a)?(_.each(a,function(b,c){if(_.isArray(b)){var d=[];_.each(b,function(a){_.isString(a)?d.push(a):logger.info("您的数据-",b,"的数组里的值必须是字符串,已经将其删除")}),0!==d.length?a[c]=d:(delete a[c],logger.info("已经删除空的数组"))}_.isString(b)||_.isNumber(b)||_.isDate(b)||_.isBoolean(b)||_.isArray(b)||(logger.info("您的数据-",b,"-格式不满足要求，我们已经将其删除"),delete a[c])}),a):a},_.strip_empty_properties=function(a){var b={};return _.each(a,function(a,c){null!=a&&(b[c]=a)}),b},_.utf8Encode=function(a){a=(a+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");var b,c,d,e="",f=0;for(b=c=0,f=a.length,d=0;f>d;d++){var g=a.charCodeAt(d),h=null;128>g?c++:h=g>127&&2048>g?String.fromCharCode(g>>6|192,63&g|128):String.fromCharCode(g>>12|224,g>>6&63|128,63&g|128),null!==h&&(c>b&&(e+=a.substring(b,c)),e+=h,b=c=d+1)}return c>b&&(e+=a.substring(b,a.length)),e},_.detector=detector,_.base64Encode=function(a){var b,c,d,e,f,g,h,i,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k=0,l=0,m="",n=[];if(!a)return a;a=_.utf8Encode(a);do b=a.charCodeAt(k++),c=a.charCodeAt(k++),d=a.charCodeAt(k++),i=b<<16|c<<8|d,e=i>>18&63,f=i>>12&63,g=i>>6&63,h=63&i,n[l++]=j.charAt(e)+j.charAt(f)+j.charAt(g)+j.charAt(h);while(k<a.length);switch(m=n.join(""),a.length%3){case 1:m=m.slice(0,-2)+"==";break;case 2:m=m.slice(0,-1)+"="}return m},_.UUID=function(){var a=function(){for(var a=1*new Date,b=0;a==1*new Date;)b++;return a.toString(16)+b.toString(16)},b=function(){return Math.random().toString(16).replace(".","")},c=function(a){function b(a,b){var c,d=0;for(c=0;c<b.length;c++)d|=f[c]<<8*c;return a^d}var c,d,e=navigator.userAgent,f=[],g=0;for(c=0;c<e.length;c++)d=e.charCodeAt(c),f.unshift(255&d),f.length>=4&&(g=b(g,f),f=[]);return f.length>0&&(g=b(g,f)),g.toString(16)};return function(){var d=String(screen.height*screen.width);d=d&&/\d{5,}/.test(d)?d.toString(16):String(31242*Math.random()).replace(".","").slice(0,8);var e=a()+"-"+b()+"-"+c()+"-"+d+"-"+a();return e?(just_test_distinctid_2=1,e):(just_test_distinctid_2=2,(String(Math.random())+String(Math.random())+String(Math.random())).slice(2,15))}}(),_.getQueryParam=function(a,b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+b+"=([^&#]*)",d=new RegExp(c),e=d.exec(a);return null===e||e&&"string"!=typeof e[1]&&e[1].length?"":_.decodeURIComponent(e[1]).replace(/\+/g," ")},_.urlParse=function(a){var b=function(a){this._fields={Username:4,Password:5,Port:7,Protocol:2,Host:6,Path:8,URL:0,QueryString:9,Fragment:10},this._values={},this._regex=null,this._regex=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/,"undefined"!=typeof a&&this._parse(a)};return b.prototype.setUrl=function(a){this._parse(a)},b.prototype._initValues=function(){for(var a in this._fields)this._values[a]=""},b.prototype.getUrl=function(){var a="";return a+=this._values.Origin,a+=this._values.Port?":"+this._values.Port:"",a+=this._values.Path,a+=this._values.QueryString?"?"+this._values.QueryString:""},b.prototype._parse=function(a){this._initValues();var b=this._regex.exec(a);if(!b)throw"DPURLParser::_parse -> Invalid URL";for(var c in this._fields)"undefined"!=typeof b[this._fields[c]]&&(this._values[c]=b[this._fields[c]]);this._values.Hostname=this._values.Host.replace(/:\d+$/,""),this._values.Origin=this._values.Protocol+"://"+this._values.Hostname},new b(a)},_.hasStandardBrowserEnviroment=function(){return window?document?navigator?screen?void 0:"screen":"navigator":"document":"window"},_.bindReady=function(a){function b(){return d?!1:(d=!0,void a())}function c(){if(!d)try{document.documentElement.doScroll("left"),b()}catch(a){setTimeout(c,10)}}var d=!1;if(document.addEventListener)document.addEventListener("DOMContentLoaded",b,!1);else if(document.attachEvent){try{var e=null!=window.frameElement}catch(f){}document.documentElement.doScroll&&!e&&c(),document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&b()})}if(window.addEventListener)window.addEventListener("load",b,!1);else if(window.attachEvent)window.attachEvent("onload",b);else{var g=window.onload;window.onload=function(){g&&g(),b()}}},_.addEvent=function(){function a(a,c,d){var e=function(e){if(e=e||b(window.event)){e.target=e.srcElement;var f,g,h=!0;return _.isFunction(d)&&(f=d(e)),g=c.call(a,e),(!1===f||!1===g)&&(h=!1),h}};return e}function b(a){return a&&(a.preventDefault=b.preventDefault,a.stopPropagation=b.stopPropagation),a}var c=function(b,c,d){if(b.addEventListener)b.addEventListener(c,d,!1);else{var e="on"+c,f=b[e];b[e]=a(b,d,f)}};b.preventDefault=function(){this.returnValue=!1},b.stopPropagation=function(){this.cancelBubble=!0},c.apply(null,arguments)},_.addHashEvent=function(a){var b="pushState"in window.history?"popstate":"hashchange";_.addEvent(window,b,a)},_.cookie={get:function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(b))return _.decodeURIComponent(e.substring(b.length,e.length))}return null},set:function(a,b,c,d,e){d="undefined"==typeof d?sd.para.cross_subdomain:d;var f="",g="",h="";if(c="undefined"==typeof c?730:c,d){var i=document.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),j=i?i[0]:"";f=j?"; domain=."+j:""}if(0!==c){var k=new Date;"s"===String(c).slice(-1)?k.setTime(k.getTime()+1e3*Number(String(c).slice(0,-1))):k.setTime(k.getTime()+24*c*60*60*1e3),g="; expires="+k.toGMTString()}e&&(h="; secure"),document.cookie=a+"="+encodeURIComponent(b)+g+"; path=/"+f+h},remove:function(a,b){b="undefined"==typeof b?sd.para.cross_subdomain:b,_.cookie.set(a,"",-1,b)}},_.localStorage={get:function(a){return window.localStorage.getItem(a)},parse:function(a){var b;try{b=JSON.parse(_.localStorage.get(a))||null}catch(c){}return b},set:function(a,b){window.localStorage.setItem(a,b)},remove:function(a){window.localStorage.removeItem(a)},isSupport:function(){var a=!0;try{var b="__sensorsdatasupport__",c="testIsSupportStorage";_.localStorage.set(b,c),_.localStorage.get(b)!==c&&(a=!1),_.localStorage.remove(b)}catch(d){a=!1}return a}},_.xhr=function(a){if(a){var b=new XMLHttpRequest;return"withCredentials"in b?b:"undefined"!=typeof XDomainRequest?new XDomainRequest:b}if(XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(c){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(c){}}},_.ajax=function(a){function b(a){try{return JSON.parse(a)}catch(b){return{}}}var c=_.xhr(a.cors);a.type||(a.type=a.data?"POST":"GET"),a=_.extend({success:function(){},error:function(){}},a),c.onreadystatechange=function(){4==c.readyState&&(c.status>=200&&c.status<300||304==c.status?a.success(b(c.responseText)):a.error(b(c.responseText),c.status),c.onreadystatechange=null,c.onload=null)},c.open(a.type,a.url,!0);try{if(c.withCredentials=!0,_.isObject(a.header))for(var d in a.header)c.setRequestHeader(d,a.header[d]);a.data&&(c.setRequestHeader("X-Requested-With","XMLHttpRequest"),"application/json"===a.contentType?c.setRequestHeader("Content-type","application/json; charset=UTF-8"):c.setRequestHeader("Content-type","application/x-www-form-urlencoded"))}catch(e){}c.send(a.data||null)},_.url=function(){function a(){return new RegExp(/(.*?)\.?([^\.]*?)\.?(com|net|org|biz|ws|in|me|co\.uk|co|org\.uk|ltd\.uk|plc\.uk|me\.uk|edu|mil|br\.com|cn\.com|eu\.com|hu\.com|no\.com|qc\.com|sa\.com|se\.com|se\.net|us\.com|uy\.com|ac|co\.ac|gv\.ac|or\.ac|ac\.ac|af|am|as|at|ac\.at|co\.at|gv\.at|or\.at|asn\.au|com\.au|edu\.au|org\.au|net\.au|id\.au|be|ac\.be|adm\.br|adv\.br|am\.br|arq\.br|art\.br|bio\.br|cng\.br|cnt\.br|com\.br|ecn\.br|eng\.br|esp\.br|etc\.br|eti\.br|fm\.br|fot\.br|fst\.br|g12\.br|gov\.br|ind\.br|inf\.br|jor\.br|lel\.br|med\.br|mil\.br|net\.br|nom\.br|ntr\.br|odo\.br|org\.br|ppg\.br|pro\.br|psc\.br|psi\.br|rec\.br|slg\.br|tmp\.br|tur\.br|tv\.br|vet\.br|zlg\.br|br|ab\.ca|bc\.ca|mb\.ca|nb\.ca|nf\.ca|ns\.ca|nt\.ca|on\.ca|pe\.ca|qc\.ca|sk\.ca|yk\.ca|ca|cc|ac\.cn|com\.cn|edu\.cn|gov\.cn|org\.cn|bj\.cn|sh\.cn|tj\.cn|cq\.cn|he\.cn|nm\.cn|ln\.cn|jl\.cn|hl\.cn|js\.cn|zj\.cn|ah\.cn|gd\.cn|gx\.cn|hi\.cn|sc\.cn|gz\.cn|yn\.cn|xz\.cn|sn\.cn|gs\.cn|qh\.cn|nx\.cn|xj\.cn|tw\.cn|hk\.cn|mo\.cn|cn|cx|cz|de|dk|fo|com\.ec|tm\.fr|com\.fr|asso\.fr|presse\.fr|fr|gf|gs|co\.il|net\.il|ac\.il|k12\.il|gov\.il|muni\.il|ac\.in|co\.in|org\.in|ernet\.in|gov\.in|net\.in|res\.in|is|it|ac\.jp|co\.jp|go\.jp|or\.jp|ne\.jp|ac\.kr|co\.kr|go\.kr|ne\.kr|nm\.kr|or\.kr|li|lt|lu|asso\.mc|tm\.mc|com\.mm|org\.mm|net\.mm|edu\.mm|gov\.mm|ms|nl|no|nu|pl|ro|org\.ro|store\.ro|tm\.ro|firm\.ro|www\.ro|arts\.ro|rec\.ro|info\.ro|nom\.ro|nt\.ro|se|si|com\.sg|org\.sg|net\.sg|gov\.sg|sk|st|tf|ac\.th|co\.th|go\.th|mi\.th|net\.th|or\.th|tm|to|com\.tr|edu\.tr|gov\.tr|k12\.tr|net\.tr|org\.tr|com\.tw|org\.tw|net\.tw|ac\.uk|uk\.com|uk\.net|gb\.com|gb\.net|vg|sh|kz|ch|info|ua|gov|name|pro|ie|hk|com\.hk|org\.hk|net\.hk|edu\.hk|us|tk|cd|by|ad|lv|eu\.lv|bz|es|jp|cl|ag|mobi|eu|co\.nz|org\.nz|net\.nz|maori\.nz|iwi\.nz|io|la|md|sc|sg|vc|tw|travel|my|se|tv|pt|com\.pt|edu\.pt|asia|fi|com\.ve|net\.ve|fi|org\.ve|web\.ve|info\.ve|co\.ve|tel|im|gr|ru|net\.ru|org\.ru|hr|com\.hr|ly|xyz)$/)}function b(a){return _.decodeURIComponent(a.replace(/\+/g," "))}function c(a,b){var c=a.charAt(0),d=b.split(c);return c===a?d:(a=parseInt(a.substring(1),10),d[0>a?d.length+a:a-1])}function d(a,c){for(var d=a.charAt(0),e=c.split("&"),f=[],g={},h=[],i=a.substring(1),j=0,k=e.length;k>j;j++)if(f=e[j].match(/(.*?)=(.*)/),f||(f=[e[j],e[j],""]),""!==f[1].replace(/\s/g,"")){if(f[2]=b(f[2]||""),i===f[1])return f[2];h=f[1].match(/(.*)\[([0-9]+)\]/),h?(g[h[1]]=g[h[1]]||[],g[h[1]][h[2]]=f[2]):g[f[1]]=f[2]}return d===a?g:g[i]}return function(b,e){var f,g={};if("tld?"===b)return a();if(e=e||window.location.toString(),!b)return e;if(b=b.toString(),f=e.match(/^mailto:([^\/].+)/))g.protocol="mailto",g.email=f[1];else{if((f=e.match(/(.*?)\/#\!(.*)/))&&(e=f[1]+f[2]),(f=e.match(/(.*?)#(.*)/))&&(g.hash=f[2],e=f[1]),g.hash&&b.match(/^#/))return d(b,g.hash);if((f=e.match(/(.*?)\?(.*)/))&&(g.query=f[2],e=f[1]),g.query&&b.match(/^\?/))return d(b,g.query);if((f=e.match(/(.*?)\:?\/\/(.*)/))&&(g.protocol=f[1].toLowerCase(),e=f[2]),(f=e.match(/(.*?)(\/.*)/))&&(g.path=f[2],e=f[1]),g.path=(g.path||"").replace(/^([^\/])/,"/$1").replace(/\/$/,""),b.match(/^[\-0-9]+$/)&&(b=b.replace(/^([^\/])/,"/$1")),b.match(/^\//))return c(b,g.path.substring(1));if(f=c("/-1",g.path.substring(1)),f&&(f=f.match(/(.*?)\.(.*)/))&&(g.file=f[0],g.filename=f[1],g.fileext=f[2]),(f=e.match(/(.*)\:([0-9]+)$/))&&(g.port=f[2],e=f[1]),(f=e.match(/(.*?)@(.*)/))&&(g.auth=f[1],e=f[2]),g.auth&&(f=g.auth.match(/(.*)\:(.*)/),g.user=f?f[1]:g.auth,g.pass=f?f[2]:void 0),g.hostname=e.toLowerCase(),"."===b.charAt(0))return c(b,g.hostname);a()&&(f=g.hostname.match(a()),f&&(g.tld=f[3],g.domain=f[2]?f[2]+"."+f[3]:void 0,g.sub=f[1]||void 0)),g.port=g.port||("https"===g.protocol?"443":"80"),g.protocol=g.protocol||("443"===g.port?"https":"http")}return b in g?g[b]:"{}"===b?g:void 0}}(),_.dom={},_.getReferrer=function(a){var a=a||document.referrer;return 0===a.indexOf("https://www.baidu.com/")&&(a=a.split("?")[0]),a=a.slice(0,sd.para.max_referrer_string_length),"string"==typeof a?a:""},_.info={initPage:function(){var a=_.getReferrer(),b=a?_.url("hostname",a):a,c=a?_.url("domain",a):a,d=location.href,e=d?_.url("hostname",d):d,f=d?_.url("domain",d):d;this.pageProp={referrer:a,referrer_host:b,referrer_domain:c,url:d,url_host:e,url_domain:f}},pageProp:{},campaignParams:function(){var a=source_channel_standard.split(" "),b="",c={};return _.isArray(sd.para.source_channel)&&sd.para.source_channel.length>0&&(a=a.concat(sd.para.source_channel),a=_.unique(a)),_.each(a,function(a){b=_.getQueryParam(location.href,a),b.length&&(c[a]=b)}),c},campaignParamsStandard:function(a,b){a=a||"",b=b||"";var c=_.info.campaignParams(),d={},e={};for(var f in c)-1!==(" "+source_channel_standard+" ").indexOf(" "+f+" ")?d[a+f]=c[f]:e[b+f]=c[f];return{$utms:d,otherUtms:e}},properties:function(){return{$os:detector.os.name,$model:detector.device.name,$os_version:String(detector.os.version),$screen_height:Number(screen.height)||0,$screen_width:Number(screen.width)||0,$lib:"js",$lib_version:String(LIB_VERSION),$browser:detector.browser.name,$browser_version:String(detector.browser.version)}},currentProps:{},register:function(a){_.extend(_.info.currentProps,a)}},sd.sendState={},sd.sendState._complete=0,sd.sendState._receive=0,sd.sendState.getSendCall=function(a,b){++this._receive;var c="_state"+this._receive,d=this;this[c]=document.createElement("img"),this[c].onload=this[c].onerror=function(a){d[c].onload=null,d[c].onerror=null,delete d[c],++d._complete,"function"==typeof b&&b()},a._nocache=(String(Math.random())+String(Math.random())+String(Math.random())).slice(2,15),logger.info(a),a=JSON.stringify(a),-1!==sd.para.server_url.indexOf("?")?this[c].src=sd.para.server_url+"&data="+encodeURIComponent(_.base64Encode(a)):this[c].src=sd.para.server_url+"?data="+encodeURIComponent(_.base64Encode(a))};var saNewUser={checkIsAddSign:function(a){"track"===a.type&&(null!==_.cookie.get("sensorsdata_is_new_user")?a.properties.$is_first_day=!0:a.properties.$is_first_day=!1)},is_first_visit_time:!1,checkIsFirstTime:function(a){"track"===a.type&&(this.is_first_visit_time?(a.properties.$is_first_time=!0,this.is_first_visit_time=!1):a.properties.$is_first_time=!1)},storeInitCheck:function(){if(is_first_visitor){var a=new Date,b={h:23-a.getHours(),m:59-a.getMinutes(),s:59-a.getSeconds()};_.cookie.set("sensorsdata_is_new_user","true",3600*b.h+60*b.m+b.s+"s"),this.is_first_visit_time=!0}else null===_.cookie.get("sensorsdata_is_new_user")&&(this.checkIsAddSign=function(a){"track"===a.type&&(a.properties.$is_first_day=!1)}),this.checkIsFirstTime=function(a){"track"===a.type&&(a.properties.$is_first_time=!1)}},checkIsFirstLatest:function(){var a=_.info.pageProp.url_domain,b=_.info.pageProp.referrer_domain;""!==a&&a!==b&&sd.register({$latest_referrer:_.info.pageProp.referrer,$latest_referrer_host:_.info.pageProp.referrer_host});var c=_.info.campaignParamsStandard("$latest_","_latest_"),d=c.$utms,e=c.otherUtms;_.isEmptyObject(d)||sd.register(d),_.isEmptyObject(e)||sd.register(e)}},saEvent={};saEvent.checkOption={regChecks:{regName:/^((?!^distinct_id$|^original_id$|^time$|^properties$|^id$|^first_id$|^second_id$|^users$|^events$|^event$|^user_id$|^date$|^datetime$)[a-zA-Z_$][a-zA-Z\d_$]{0,99})$/i},checkPropertiesKey:function(a){var b=this,c=!0;return _.each(a,function(a,d){b.regChecks.regName.test(d)||(c=!1)}),c},check:function(a,b){return"string"==typeof this[a]?this[this[a]](b):this[a](b)},str:function(a){return _.isString(a)?!0:(logger.info("请检查参数格式,必须是字符串"),!0)},properties:function(a){return _.strip_sa_properties(a),a?_.isObject(a)?this.checkPropertiesKey(a)?!0:(logger.info("properties里的key必须是由字符串数字_组成，且不能是系统保留字"),!0):(logger.info("properties可以没有，但有的话必须是对象"),!0):!0},propertiesMust:function(a){return _.strip_sa_properties(a),void 0===a||!_.isObject(a)||_.isEmptyObject(a)?(logger.info("properties必须是对象且有值"),!0):this.checkPropertiesKey(a)?!0:(logger.info("properties里的key必须是由字符串数字_组成，且不能是系统保留字"),!0)},event:function(a){return _.isString(a)&&this.regChecks.regName.test(a)?!0:(logger.info("请检查参数格式,必须是字符串,且eventName必须是字符串_开头,且不能是系统保留字"),!0)},test_id:"str",group_id:"str",distinct_id:function(a){return _.isString(a)&&/^.{1,255}$/.test(a)?!0:(logger.info("distinct_id必须是不能为空，且小于255位的字符串"),!1)}},saEvent.check=function(a){var b=!0;for(var c in a)if(!this.checkOption.check(c,a[c]))return!1;return b},saEvent.send=function(a,b){var c={distinct_id:store.getDistinctId(),lib:{$lib:"js",$lib_method:"code",$lib_version:String(LIB_VERSION)},properties:{}};if("string"!=typeof store.getDistinctId()||""==typeof store.getDistinctId()){var d="";switch(store.getDistinctId()){
case null:d="null";break;case void 0:d="undefined";break;case"":d="空";break;default:d=String(store.getDistinctId())}error_msg.push("distinct_id-"+just_test_distinctid+"-"+just_test_distinctid_2+"-"+d+"-"+just_test_distinctid_detail+"-"+just_test_distinctid_detail2)}_.extend(c,a),error_msg.length>0&&(c.jssdk_error=error_msg.join("--")),_.isObject(a.properties)&&!_.isEmptyObject(a.properties)&&_.extend(c.properties,a.properties),_.isObject(b)&&_.extend(c.lib,b),a.type&&"profile"===a.type.slice(0,7)||(c.properties=_.extend({},_.info.properties(),store.getProps(),store.getSessionProps(),_.info.currentProps,c.properties)),c.properties.$time&&_.isDate(c.properties.$time)?(c.time=1*c.properties.$time,delete c.properties.$time):sd.para.use_client_time&&(c.time=1*new Date),_.searchObjDate(c),_.searchObjString(c),saNewUser.checkIsAddSign(c),saNewUser.checkIsFirstTime(c),sd.para.debug_mode===!0?(logger.info(c),this.debugPath(JSON.stringify(c),b)):sd.sendState.getSendCall(c,b)},saEvent.debugPath=function(a,b){var c=a,d="";d=-1!==sd.para.debug_mode_url.indexOf("?")?sd.para.debug_mode_url+"&data="+encodeURIComponent(_.base64Encode(a)):sd.para.debug_mode_url+"?data="+encodeURIComponent(_.base64Encode(a)),_.ajax({url:d,type:"GET",cors:!0,header:{"Dry-Run":String(sd.para.debug_mode_upload)},success:function(a){_.isEmptyObject(a)===!0?alert("debug数据发送成功"+c):alert("debug失败 错误原因"+JSON.stringify(a))}})};var store=sd.store={_sessionState:{},_state:{},getProps:function(){return this._state.props},getSessionProps:function(){return this._sessionState},getDistinctId:function(){return this._state.distinct_id},getFirstId:function(){return this._state.first_id},toState:function(a){var b=null;if(null!=a&&_.isJSONString(a))if(b=JSON.parse(a),b.distinct_id){if(this._state=b,"object"==typeof b.props){for(var c in b.props)"string"==typeof b.props[c]&&(b.props[c]=b.props[c].slice(0,sd.para.max_referrer_string_length));this.save()}}else this.set("distinct_id",_.UUID()),error_msg.push("toStateParseDistinctError");else this.set("distinct_id",_.UUID()),error_msg.push("toStateParseError")},initSessionState:function(){var a=_.cookie.get("sensorsdata2015session"),b=null;null!==a&&"object"==typeof(b=JSON.parse(a))&&(this._sessionState=b||{})},setOnce:function(a,b){a in this._state||this.set(a,b)},set:function(a,b){this._state=this._state||{},this._state[a]=b,this.save()},change:function(a,b){this._state[a]=b},setSessionProps:function(a){var b=this._sessionState;_.extend(b,a),this.sessionSave(b)},setSessionPropsOnce:function(a){var b=this._sessionState;_.coverExtend(b,a),this.sessionSave(b)},setProps:function(a){var b=this._state.props||{};_.extend(b,a),this.set("props",b)},setPropsOnce:function(a){var b=this._state.props||{};_.coverExtend(b,a),this.set("props",b)},clearAllProps:function(){this._sessionState={};for(var a in this._state.props)1!==a.indexOf("latest_")&&delete this._state.props[a];this.sessionSave({}),this.save()},sessionSave:function(a){this._sessionState=a,_.cookie.set("sensorsdata2015session",JSON.stringify(this._sessionState),0)},save:function(){_.cookie.set("sensorsdata2015jssdkcross",JSON.stringify(this._state),730,sd.para.cross_subdomain)},init:function(){navigator.cookieEnabled||(error_msg.push("cookieNotEnable"),_.localStorage.isSupport||error_msg.push("localStorageNotEnable")),this.initSessionState();var a=_.cookie.get(sd.para.cross_subdomain?"sensorsdata2015jssdkcross":"sensorsdata2015jssdk");null===a?(is_first_visitor=!0,just_test_distinctid=1,this.set("distinct_id",_.UUID())):(just_test_distinctid=2,just_test_distinctid_detail=JSON.stringify(a),just_test_distinctid_detail2=navigator.userAgent+"^_^"+document.cookie,this.toState(a)),saNewUser.storeInitCheck(),saNewUser.checkIsFirstLatest()}},commonWays={getUtm:function(){return _.info.campaignParams()},getStayTime:function(){return(new Date-sd._t)/1e3},setInitReferrer:function(){var a=_.getReferrer();sd.setOnceProfile({_init_referrer:a,_init_referrer_host:_.info.pageProp.referrer_host})},setSessionReferrer:function(){var a=_.getReferrer();store.setSessionPropsOnce({_session_referrer:a,_session_referrer_host:_.info.pageProp.referrer_host})},setDefaultAttr:function(){_.info.register({_current_url:location.href,_referrer:_.getReferrer(),_referring_host:_.info.pageProp.referrer_host})},allTrack:function(){if(!document||!document.body)return setTimeout(this.allTrack,1e3),!1;if("has_init"===sd.allTrack)return!1;sd.allTrack="has_init";var a={getProps:function(a,b){var c={};if(c.$element_type=a,c.$element_name=b.getAttribute("name"),c.$element_id=b.getAttribute("id"),c.$element_class_name="string"==typeof b.className?b.className:null,c.$element_target_url=b.getAttribute("href"),b.textContent){var d=_.trim(b.textContent);d&&(d=d.replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)),c.$element_content=d}return c=_.strip_empty_properties(c),c.$url=location.href,c.$url_path=location.pathname,c.$title=document.title,c},clickEvents:function(a){var b={},c=a.target,d=c.tagName.toLowerCase();if(-1!==" button a input ".indexOf(" "+d+" ")){if("input"===d){if("button"!==c.getAttribute("type")&&"submit"!==c.getAttribute("type"))return!1;b.$element_content=c.value}_.extend(b,this.getProps(d,c)),"a"===d?_.trackLink({event:a},"$WebClick",b):sd.track("$WebClick",b)}}};_.addEvent(document,"click",function(b){a.clickEvents(b)})},autoTrackWithoutProfile:function(a){this.autoTrack(_.extend(a,{not_set_profile:!0}))},autoTrack:function(a,b){a=_.isObject(a)?a:{};var c=_.info.campaignParams(),d={};for(var e in c)-1!==(" "+source_channel_standard+" ").indexOf(" "+e+" ")?d["$"+e]=c[e]:d[e]=c[e];is_first_visitor&&!a.not_set_profile&&sd.setOnceProfile(_.extend({$first_visit_time:new Date,$first_referrer:_.getReferrer(),$first_browser_language:navigator.language,$first_referrer_host:_.info.pageProp.referrer_host},d)),a.not_set_profile&&delete a.not_set_profile;var f=location.href;sd.para.is_single_page&&_.addHashEvent(function(){var c=_.getReferrer(f);sd.track("$pageview",_.extend({$referrer:c,$referrer_host:_.url("hostname",c)||"",$url:location.href,$url_path:location.pathname,$title:document.title},d,a),b),f=location.href}),sd.track("$pageview",_.extend({$referrer:_.getReferrer(),$referrer_host:_.info.pageProp.referrer_host,$url:location.href,$url_path:location.pathname,$title:document.title},d,a),b)}};sd.quick=function(){var a=slice.call(arguments),b=a[0],c=a.slice(1);return"string"==typeof b&&commonWays[b]?commonWays[b].apply(commonWays,c):void("function"==typeof b?b.apply(sd,c):logger.info("quick方法中没有这个功能"+a[0]))},sd.track=function(a,b,c){saEvent.check({event:a,properties:b})&&saEvent.send({type:"track",event:a,properties:b},c)},_.trackLink=function(a,b,c){function d(a){function d(){f||(f=!0,location.href=e.href)}a.preventDefault();var f=!1;setTimeout(d,1e3),sd.track(b,c,d)}a=a||{};var e=null;return a.ele&&(e=a.ele),a.event&&(e=a.event.target),c=c||{},e&&"object"==typeof e?!e.href||/^javascript/.test(e.href)||e.target?(sd.track(b,c),!1):(a.event&&d(a.event),void(a.ele&&_.addEvent(a.ele,"click",function(a){d(a)}))):!1},sd.trackLink=function(a,b,c){_.trackLink({ele:a},b,c)},sd.trackLinks=function(a,b,c){return c=c||{},a&&"object"==typeof a?!a.href||/^javascript/.test(a.href)||a.target?!1:void _.addEvent(a,"click",function(d){function e(){f||(f=!0,location.href=a.href)}d.preventDefault();var f=!1;setTimeout(e,1e3),sd.track(b,c,e)}):!1},sd.setProfile=function(a,b){saEvent.check({propertiesMust:a})&&saEvent.send({type:"profile_set",properties:a},b)},sd.setOnceProfile=function(a,b){saEvent.check({propertiesMust:a})&&saEvent.send({type:"profile_set_once",properties:a},b)},sd.appendProfile=function(a,b){saEvent.check({propertiesMust:a})&&(_.each(a,function(b,c){_.isString(b)?a[c]=[b]:_.isArray(b)||(delete a[c],logger.info("appendProfile属性的值必须是字符串或者数组"))}),_.isEmptyObject(a)||saEvent.send({type:"profile_append",properties:a},b))},sd.incrementProfile=function(a,b){function c(a){for(var b in a)if(!/-*\d+/.test(String(a[b])))return!1;return!0}var d=a;_.isString(a)&&(a={},a[d]=1),saEvent.check({propertiesMust:a})&&(c(a)?saEvent.send({type:"profile_increment",properties:a},b):logger.info("profile_increment的值只能是数字"))},sd.deleteProfile=function(a){saEvent.send({type:"profile_delete"},a),store.set("distinct_id",_.UUID())},sd.unsetProfile=function(a,b){var c=a,d={};_.isString(a)&&(a=[],a.push(c)),_.isArray(a)?(_.each(a,function(a){_.isString(a)?d[a]=!0:logger.info("profile_unset给的数组里面的值必须时string,已经过滤掉",a)}),saEvent.send({type:"profile_unset",properties:d},b)):logger.info("profile_unset的参数是数组")},sd.identify=function(a,b){var c=store.getFirstId();"undefined"==typeof a?c?store.set("first_id",_.UUID()):store.set("distinct_id",_.UUID()):saEvent.check({distinct_id:a})?b===!0?c?store.set("first_id",a):store.set("distinct_id",a):c?store.change("first_id",a):store.change("distinct_id",a):logger.info("identify的参数必须是字符串")},sd.trackSignup=function(a,b,c,d){saEvent.check({distinct_id:a,event:b,properties:c})&&(saEvent.send({original_id:store.getFirstId()||store.getDistinctId(),distinct_id:a,type:"track_signup",event:b,properties:c},d),store.set("distinct_id",a))},sd.trackAbtest=function(a,b){},sd.registerPage=function(a){saEvent.check({properties:a})?_.extend(_.info.currentProps,a):logger.info("register输入的参数有误")},sd.clearAllRegister=function(){store.clearAllProps()},sd.register=function(a){saEvent.check({properties:a})?store.setProps(a):logger.info("register输入的参数有误")},sd.registerOnce=function(a){saEvent.check({properties:a})?store.setPropsOnce(a):logger.info("registerOnce输入的参数有误")},sd.registerSession=function(a){saEvent.check({properties:a})?store.setSessionProps(a):logger.info("registerSession输入的参数有误")},sd.registerSessionOnce=function(a){saEvent.check({properties:a})?store.setSessionPropsOnce(a):logger.info("registerSessionOnce输入的参数有误")},sd.login=function(a){if(saEvent.check({distinct_id:a})){var b=store.getFirstId(),c=store.getDistinctId();a!==c&&(b?sd.trackSignup(a,"$SignUp"):(store.set("first_id",c),sd.trackSignup(a,"$SignUp")))}else logger.info("login的参数必须是字符串")},sd.logout=function(a){var b=store.getFirstId();b?(store.set("first_id",""),a===!0?store.set("distinct_id",_.UUID()):store.set("distinct_id",b)):logger.info("没有first_id，logout失败")},sd.init=function(){_.isObject(sd.sdkMain)&&sd.sdkMain._init()},sd._init=function(){app_js_bridge(),_.info.initPage(),store.init(),sd._q&&_.isArray(sd._q)&&sd._q.length>0&&_.each(sd._q,function(a){sd[a[0]].apply(sd,slice.call(a[1]))})},sd._init()}(window.sensorsDataAnalytic201505)}catch(err){!function(){var a=window.sensorsDataAnalytic201505;"string"==typeof a&&(a=window[a],null==a||"function"!=typeof a&&"object"!=typeof a||a.track&&a.track("_js_sdk_error",{_js_sdk_error_msg:err,$url:location.href}))}()}